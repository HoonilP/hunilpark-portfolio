---
phase: 02-layout-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/lib/utils.ts
  - src/components/layout/ThemeProvider.tsx
  - src/components/layout/ThemeToggle.tsx
  - src/components/ui/Button.tsx
  - src/components/ui/Card.tsx
  - src/components/ui/Badge.tsx
  - src/components/ui/Timeline.tsx
  - src/components/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "Dark mode toggle switches between light and dark themes without page flash"
    - "UI components (Button, Card, Badge) render with consistent styling"
    - "Design tokens include full dark mode color variants"
  artifacts:
    - path: "src/components/layout/ThemeProvider.tsx"
      provides: "next-themes wrapper for dark/light mode"
      contains: "ThemeProvider"
    - path: "src/components/layout/ThemeToggle.tsx"
      provides: "Theme toggle button with mounted state"
      contains: "useTheme"
    - path: "src/components/ui/Button.tsx"
      provides: "Button with variant and size props"
      contains: "ButtonProps"
    - path: "src/components/ui/Card.tsx"
      provides: "Card with border-only style"
      contains: "CardProps"
    - path: "src/components/ui/Badge.tsx"
      provides: "Badge for tech stack tags"
      contains: "BadgeProps"
    - path: "src/components/ui/Timeline.tsx"
      provides: "Timeline component for experience section"
      contains: "TimelineProps"
    - path: "src/lib/utils.ts"
      provides: "cn() className merge utility"
      contains: "export function cn"
    - path: "src/app/globals.css"
      provides: "Dark mode @variant directive and extended color tokens"
      contains: "@variant dark"
  key_links:
    - from: "src/components/layout/ThemeToggle.tsx"
      to: "next-themes"
      via: "useTheme hook"
      pattern: "useTheme"
    - from: "src/components/ui/Button.tsx"
      to: "src/lib/utils.ts"
      via: "cn() import"
      pattern: "import.*cn.*from"
    - from: "src/app/globals.css"
      to: "next-themes"
      via: "data-theme attribute"
      pattern: "data-theme"
---

<objective>
Install dark mode infrastructure (next-themes + Tailwind v4 @variant), create utility functions, and build reusable UI component library (Button, Card, Badge, Timeline).

Purpose: Establish the design system foundation that all future pages and sections will use. Dark mode support and consistent components ensure a designer-quality visual experience.
Output: ThemeProvider, ThemeToggle, cn() utility, 4 UI components (Button, Card, Badge, Timeline), extended CSS design tokens with dark mode.
</objective>

<execution_context>
@/Users/hipark/.claude/get-shit-done/workflows/execute-plan.md
@/Users/hipark/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-layout-design-system/02-CONTEXT.md
@.planning/phases/02-layout-design-system/02-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies, set up dark mode infrastructure and utility functions</name>
  <files>
    package.json
    src/app/globals.css
    src/lib/utils.ts
    src/components/layout/ThemeProvider.tsx
    src/components/layout/ThemeToggle.tsx
  </files>
  <action>
1. Install dependencies:
   ```bash
   npm install next-themes clsx
   ```

2. Update `src/app/globals.css`:
   - Add dark mode variant AFTER the `@import "tailwindcss"` line:
     ```css
     @variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));
     ```
   - Extend `@theme` block with additional color tokens needed for dark mode. Keep existing neutral-50 through neutral-950 and primary-500/600. Add:
     - `--color-primary-400: oklch(0.62 0.14 250);` (lighter primary for dark mode hover)
     - `--color-primary-700: oklch(0.42 0.16 250);` (darker primary for light mode hover)
   - Add CSS keyframes for subtle animations (used by components):
     ```css
     @keyframes fade-in-up {
       from { opacity: 0; transform: translateY(10px); }
       to { opacity: 1; transform: translateY(0); }
     }
     .animate-fade-in-up {
       animation: fade-in-up 0.5s ease-out forwards;
     }
     @media (prefers-reduced-motion: reduce) {
       .animate-fade-in-up {
         animation: none;
         opacity: 1;
         transform: none;
       }
     }
     ```

3. Create `src/lib/utils.ts`:
   ```typescript
   import clsx, { type ClassValue } from 'clsx';

   export function cn(...inputs: ClassValue[]) {
     return clsx(inputs);
   }
   ```

4. Create `src/components/layout/ThemeProvider.tsx`:
   - 'use client' directive
   - Wraps children with `ThemeProvider` from next-themes
   - Props: `attribute="data-theme"`, `defaultTheme="system"`, `enableSystem`
   - Type: accepts `children: React.ReactNode`

5. Create `src/components/layout/ThemeToggle.tsx`:
   - 'use client' directive
   - Uses `useTheme` from next-themes and `useState`/`useEffect` for mounted check
   - Returns placeholder `<div className="w-9 h-9" />` while not mounted (prevents layout shift)
   - Once mounted, renders button that toggles between 'dark' and 'light'
   - Use SVG icons (sun/moon) instead of emoji — keep it clean and professional
   - Sun icon for dark mode (click to go light), moon icon for light mode (click to go dark)
   - Styling: `rounded-md p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors`
   - Include `aria-label="Toggle theme"`
  </action>
  <verify>
    - `npm run build` completes without errors
    - `src/lib/utils.ts` exports `cn` function
    - `src/components/layout/ThemeProvider.tsx` exists with 'use client' and next-themes import
    - `src/components/layout/ThemeToggle.tsx` exists with mounted state pattern
    - `src/app/globals.css` contains `@variant dark` directive
  </verify>
  <done>
    - next-themes and clsx installed in package.json
    - Dark mode CSS variant configured with data-theme attribute
    - ThemeProvider wraps app with system default
    - ThemeToggle renders sun/moon icons with hydration-safe mounting
    - cn() utility available for component className composition
  </done>
</task>

<task type="auto">
  <name>Task 2: Create reusable UI components (Button, Card, Badge, Timeline)</name>
  <files>
    src/components/ui/Button.tsx
    src/components/ui/Card.tsx
    src/components/ui/Badge.tsx
    src/components/ui/Timeline.tsx
    src/components/ui/index.ts
  </files>
  <action>
1. Create `src/components/ui/Button.tsx`:
   - TypeScript interface `ButtonProps` extending `ButtonHTMLAttributes<HTMLButtonElement>`
   - Variants: 'primary' | 'secondary' | 'ghost' (default: 'primary')
   - Sizes: 'sm' | 'md' | 'lg' (default: 'md')
   - Use `cn()` from `@/lib/utils` for className composition
   - Variant styles:
     - primary: `bg-primary-500 hover:bg-primary-600 text-white dark:bg-primary-500 dark:hover:bg-primary-400`
     - secondary: `border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-900 dark:text-neutral-100`
     - ghost: `hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-700 dark:text-neutral-300`
   - Size styles:
     - sm: `px-3 py-1.5 text-sm`
     - md: `px-4 py-2 text-base`
     - lg: `px-6 py-3 text-lg`
   - Common: `rounded-md font-medium transition-colors inline-flex items-center justify-center`
   - Spread remaining props onto button element

2. Create `src/components/ui/Card.tsx`:
   - TypeScript interface `CardProps` extending `HTMLAttributes<HTMLDivElement>`
   - Optional `hover` prop (boolean, default false) — adds hover:border-primary-500 transition
   - Border only, NO shadow (user decision): `border border-neutral-200 dark:border-neutral-800 rounded-lg p-6`
   - Dark mode: `dark:border-neutral-800` (already neutral on dark)
   - Use `cn()` for className composition
   - Spread remaining props

3. Create `src/components/ui/Badge.tsx`:
   - TypeScript interface `BadgeProps` with `children: React.ReactNode` and optional `className`
   - Styling: small, inline-flex, rounded pill for tech tags
   - Light: `bg-neutral-100 text-neutral-700 border border-neutral-200`
   - Dark: `dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-700`
   - Font: `text-xs font-medium px-2.5 py-0.5 rounded-md`
   - Use `cn()` for className

4. Create `src/components/ui/Timeline.tsx`:
   - TypeScript interface `TimelineItem` with `date: string`, `title: string`, `description: string`
   - Interface `TimelineProps` with `items: TimelineItem[]`
   - Structure: relative container with vertical line on left, dots at each item
   - Vertical line: `absolute left-0 top-0 bottom-0 w-px bg-neutral-200 dark:bg-neutral-800`
   - Dot: `absolute left-0 top-1.5 w-2 h-2 rounded-full bg-primary-500 -translate-x-1/2`
   - Each item: `relative pl-8` with `space-y-1` for date/title/description
   - Date: `text-sm text-neutral-500 dark:text-neutral-400`
   - Title: `font-semibold text-neutral-900 dark:text-neutral-100`
   - Description: `text-neutral-600 dark:text-neutral-400`
   - Items wrapper: `space-y-8`

5. Create `src/components/ui/index.ts` barrel export:
   ```typescript
   export { default as Button } from './Button';
   export { default as Card } from './Card';
   export { default as Badge } from './Badge';
   export { default as Timeline } from './Timeline';
   ```
   Also re-export types:
   ```typescript
   export type { ButtonProps } from './Button';
   export type { CardProps } from './Card';
   export type { BadgeProps } from './Badge';
   export type { TimelineItem, TimelineProps } from './Timeline';
   ```
  </action>
  <verify>
    - `npm run build` completes without errors
    - All 4 component files exist in src/components/ui/
    - index.ts barrel exports all components
    - Each component has TypeScript interface for props
    - Each component uses cn() from @/lib/utils
    - All color classes have dark: variants
  </verify>
  <done>
    - Button renders with 3 variants (primary/secondary/ghost) and 3 sizes (sm/md/lg)
    - Card renders with border-only style and optional hover effect
    - Badge renders as small tech tag pill with dark mode support
    - Timeline renders vertical line with dots and items
    - All components export named types and default components via barrel
    - Every component respects dark mode via dark: variants
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors
2. `ls src/components/layout/` shows ThemeProvider.tsx and ThemeToggle.tsx
3. `ls src/components/ui/` shows Button.tsx, Card.tsx, Badge.tsx, Timeline.tsx, index.ts
4. `grep "@variant dark" src/app/globals.css` returns the dark mode variant line
5. `grep "next-themes" package.json` confirms installation
6. `grep "clsx" package.json` confirms installation
</verification>

<success_criteria>
- next-themes and clsx are installed
- Dark mode @variant directive is configured in globals.css
- ThemeProvider and ThemeToggle exist and handle hydration safely
- Button, Card, Badge, Timeline components exist with TypeScript props
- All components support dark mode via dark: utility classes
- cn() utility function is available at @/lib/utils
- Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-design-system/02-01-SUMMARY.md`
</output>
